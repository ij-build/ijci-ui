<div *ngIf="project">
  <h2>Project {{project.name}}</h2>

  <div>
    <a class="ui primary basic button" (click)="queue()"><i class="cogs icon"></i> Queue Build</a>
    <a class="ui primary basic button" routerLink="/projects/{{project.projectId}}/edit"><i class="pencil icon"></i> Edit Project</a>
    <a class="ui negative basic button" (click)="delete()"><i class="trash alternate icon"></i> Delete</a>
  </div>

  <div appModal class="ui modal">
    <div class="ui icon header">
      <i class="exclamation triangle icon"></i> Delete project?
    </div>
    <div class="content">
      <p>This will delete all associated builds, history, artifacts, and logs.</p>
    </div>
    <div class="actions">
      <div class="ui basic cancel button"><i class="check icon"></i> No</div>
      <div class="ui red ok button"><i class="delete icon"></i> Delete</div>
    </div>
  </div>

  <p>{{project.repositoryUrl}}</p>

  <div class="ui unstackable divided items">
    <div *ngFor="let build of project.builds" class="item">
      <div class="status-icon" [ngClass]="{
        'positive': build.isSucceeded(),
        'negative': build.isFailed() || build.isErrored()
      }"></div>

      <div class="content">
        <i class="icon check positive" *ngIf="build.isSucceeded()"></i>
        <i class="icon bug negative" *ngIf="build.isFailed() || build.isErrored()"></i>
        <a class="header" routerLink="/builds/{{build.buildId}}">{{project.name}}</a>

        <div class="description">
          <p *ngIf="build.commitMessage">{{build.commitMessage}}</p>
        </div>

        <div class="extra">
          <div class="ui grid">
            <div class="two column row">
              <div class="column">
                <p>Queued {{build.createdAt | amCalendar | lowercase}}</p>
                <p *ngIf="!build.isQueued()">Last updated {{build.lastUpdatedAt() | amCalendar | lowercase}}</p>
              </div>

              <div class="column">
                <p *ngIf="build.commitHash"><i class="icon code"></i> {{build.commitHash.substring(0, 8)}} on {{build.commitBranch}}</p>
                <p *ngIf="build.commitMessage"><i class="icon user"></i> Authored by {{build.commitAuthorName}} <{{build.commitAuthorEmail}}></p>
                <p *ngIf="build.commitMessage"><i class="icon user"></i> Committed by {{build.commitCommitterName}} <{{build.commitCommitterEmail}}></p>
                <p *ngIf="build.commitMessage"><i class="icon clock"></i> Authored {{build.committedAt | amCalendar | lowercase}}</p>
                <p *ngIf="build.commitMessage"><i class="icon clock"></i> Committed {{build.committedAt | amCalendar | lowercase}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
